<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Video Content Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1a73e8;
            --border-color: #dadce0;
            --text-color: #202124;
            --bg-color: #f8f9fa;
            --resizer-bg: #e0e0e0;
            --resizer-hover: #1a73e8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Google Sans', sans-serif;
            background: #ffffff;
            height: 100vh;
            color: var(--text-color);
            overflow: hidden; /* Prevent body scroll, handle inside panels */
        }

        /* FLEX CONTAINER (Gantikan Grid) */
        .container {
            display: flex;
            flex-direction: row; /* Default: Side by Side */
            height: 100vh;
            width: 100%;
            overflow: hidden;
        }

        /* --- LEFT SECTION (INPUTS) --- */
        .input-section {
            width: 450px; /* Default width */
            min-width: 300px; /* Batas minimum */
            max-width: 70%; /* Batas maksimum */
            padding: 32px;
            overflow-y: auto;
            background: #fff;
            height: 100%;
        }

        /* --- RESIZER HANDLE --- */
        .resizer {
            background-color: var(--bg-color);
            border-left: 1px solid var(--border-color);
            border-right: 1px solid var(--border-color);
            cursor: col-resize; /* Cursor geser kiri-kanan */
            width: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
            z-index: 10;
        }

        .resizer:hover, .resizer.resizing {
            background-color: var(--resizer-bg);
            border-color: var(--resizer-hover);
        }

        /* Grip Icon Visual */
        .resizer::after {
            content: "||";
            color: #9aa0a6;
            font-size: 10px;
            font-weight: bold;
            letter-spacing: 1px;
            pointer-events: none; /* Agar klik tembus ke div */
        }

        /* --- RIGHT SECTION (OUTPUT) --- */
        .output-section {
            flex: 1; /* Mengisi sisa ruang */
            min-width: 300px;
            padding: 40px;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            height: 100%;
        }

        /* --- TYPOGRAPHY & FORM STYLES --- */
        h2 { 
            margin-bottom: 24px; 
            font-size: 20px; 
            color: var(--primary-color); 
            font-weight: 700;
        }

        .section-title {
            margin: 30px 0 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e8eaed;
            font-size: 13px;
            font-weight: 700;
            color: #5f6368;
            letter-spacing: 0.8px;
            text-transform: uppercase;
        }

        .form-group { margin-bottom: 22px; }
        
        .form-group label {
            display: block;
            font-weight: 700;
            margin-bottom: 4px;
            font-size: 14px;
            color: #202124;
        }

        .helper-text {
            display: block;
            font-size: 12px;
            color: #5f6368;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .optional-badge {
            background: #e8f0fe;
            color: #1967d2;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            vertical-align: middle;
            margin-left: 6px;
            text-transform: uppercase;
            font-weight: 700;
        }

        input[type="text"], select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 13px;
            font-family: 'Google Sans', sans-serif;
            transition: border 0.2s, box-shadow 0.2s;
            background: #fff;
            color: #3c4043;
        }

        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26,115,232,0.1);
        }

        select[multiple] {
            height: auto;
            min-height: 140px;
            padding: 5px;
            background-image: none;
        }
        
        select[multiple] option {
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 2px;
            cursor: pointer;
            line-height: 1.4;
        }
        
        select[multiple] option:checked {
            background-color: #e8f0fe;
            color: #1967d2;
            font-weight: 500;
        }

        .custom-input {
            margin-top: 8px;
            display: none;
            background: #fdfdfd;
            border-left: 3px solid var(--primary-color) !important;
        }

        .output-paper {
            background: #ffffff;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            min-height: 600px; /* Kertas output panjang */
        }

        .output-content {
            font-family: 'Google Sans', sans-serif;
            font-size: 15px;
            line-height: 1.8;
            color: #202124;
        }

        .output-row {
            margin-bottom: 18px;
            display: flex;
            align-items: baseline;
        }

        .output-label {
            font-weight: 700;
            min-width: 180px;
            color: #000;
            display: inline-block;
        }

        .output-value {
            color: #3c4043;
            flex: 1;
        }

        .copy-btn {
            align-self: flex-start;
            padding: 12px 24px;
            background: #202124;
            color: #ffffff;
            border: none;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .copy-btn:hover { background: #3c4043; }
        .copy-btn:active { transform: scale(0.98); }
        .copy-btn.copied { background: #188038; }

        /* --- RESPONSIVE / MOBILE STYLE --- */
        @media (max-width: 900px) {
            .container {
                flex-direction: column; /* Stack Atas-Bawah */
            }

            .input-section {
                width: 100%;
                max-width: 100%;
                height: 50%; /* Default mobile height */
                min-height: 200px;
                max-height: 80%;
                border-right: none;
            }

            .resizer {
                width: 100%;
                height: 12px; /* Lebih tebal di HP biar gampang disentuh */
                cursor: row-resize; /* Cursor geser atas-bawah */
                border-left: none;
                border-right: none;
                border-top: 1px solid var(--border-color);
                border-bottom: 1px solid var(--border-color);
            }
            
            .resizer::after {
                content: "="; /* Ubah icon jadi horizontal grip */
                transform: rotate(90deg);
                font-size: 14px;
            }

            .output-section {
                width: 100%;
                height: auto;
                min-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <!-- INPUT SECTION -->
        <div class="input-section" id="leftPane">
            <h2>✏️</h2>

            <!-- 1. TOPIC -->
            <div class="form-group">
                <label>1. Topic</label>
                <span class="helper-text">Format: [Subject] + [Unique Angle] (e.g., "Morning routine" → "The biological weapon hidden in 5 AM")</span>
                <input type="text" id="topic" placeholder="Enter topic...">
            </div>

            <!-- 2. DURASI -->
            <div class="form-group">
                <label>2. Durasi</label>
                <select id="duration">
                    <option value="15s">15s (Micro Hook)</option>
                    <option value="30s">30s (Micro Hook)</option>
                    <option value="1m" selected>1m (Shorts/Reels)</option>
                    <option value="90s">90s (Shorts/Reels)</option>
                    <option value="3m">3m (YouTube Standard)</option>
                    <option value="5m">5m (YouTube Standard)</option>
                    <option value="8m">8m (Deep Dive)</option>
                    <option value="10m">10m (Deep Dive)</option>
                    <option value="15m+">15m+ (Documentary)</option>
                    <option value="Custom">Custom Duration...</option>
                </select>
                <input type="text" id="durationCustom" class="custom-input" placeholder="Masukkan durasi (cth: 45 detik)">
            </div>

            <!-- 3. BAHASA -->
            <div class="form-group">
                <label>3. Bahasa</label>
                <select id="language">
                    <option value="Indonesian">Indonesian</option>
                    <option value="English">English</option>
                    <option value="Mix (Indo-Eng)">Mix (Indo-Eng)</option>
                </select>
            </div>

            <!-- 4. TARGET AUDIENCE -->
            <div class="form-group">
                <label>4. Target Audience</label>
                <span class="helper-text">Psychographic, not demographic (e.g., "People stuck despite working hard")</span>
                <select id="audiencePreset">
                    <option value="">-- Pilih Preset atau Ketik Manual --</option>
                    <option value="Orang yang merasa stuck meski sudah kerja keras">Orang stuck meski kerja keras</option>
                    <option value="Pemula yang ingin hasil cepat tanpa modal besar">Pemula ingin hasil instan</option>
                    <option value="Mahasiswa/Pelajar yang minim budget">Mahasiswa/Pelajar budget minim</option>
                    <option value="Profesional sibuk yang tidak punya waktu luang">Profesional sibuk (No time)</option>
                    <option value="Skeptics who doubt mainstream advice">Skeptis terhadap saran umum</option>
                    <option value="Tech-savvy Gen Z audience">Gen Z (Tech-savvy)</option>
                    <option value="Parents worrying about their kids' future">Orang tua yang khawatir masa depan anak</option>
                    <option value="Custom">Lainnya (Ketik Manual)...</option>
                </select>
                <input type="text" id="audienceCustom" placeholder="Deskripsikan psikografis audience..." style="margin-top: 8px;">
            </div>

            <!-- 5. VOICE BASE -->
            <div class="form-group">
                <label>5. Voice Base <span style="font-weight:400; font-size:11px; color:#1a73e8">(Tahan Ctrl/Cmd untuk pilih > 1)</span></label>
                <select id="voiceBase" multiple>
                    <option value="HYPE">HYPE - High Energy</option>
                    <option value="SNAPPY">SNAPPY - Fast Paced</option>
                    <option value="DOCUMENTARY">DOCUMENTARY - Serious</option>
                    <option value="THRILLER">THRILLER - Suspenseful</option>
                    <option value="EDUCATIONAL">EDUCATIONAL - Clear Teacher</option>
                    <option value="PHILANTHROPY">PHILANTHROPY - Emotional/Kind</option>
                    <option value="POETIC">POETIC - Deep & Metaphorical</option>
                    <option value="CORPORATE">CORPORATE - Professional</option>
                    <option value="CASUAL">CASUAL - Conversational</option>
                    <option value="ARTISTIC">ARTISTIC - Creative Flow</option>
                    <option value="CINEMATIC">CINEMATIC - Movie Trailer</option>
                    <option value="SPIRITUAL">SPIRITUAL - Calm & Zen</option>
                    <option value="LORE">LORE - Storyteller</option>
                    <option value="STREET">STREET - Raw & Urban</option>
                </select>
                <input type="text" id="voiceCustom" placeholder="+ Tambahkan gaya suara custom..." style="margin-top: 8px;">
            </div>

            <!-- 6. TONE FLAVOR -->
            <div class="form-group">
                <label>6. Tone Flavor <span style="font-weight:400; font-size:11px; color:#1a73e8">(Tahan Ctrl/Cmd untuk pilih > 1)</span></label>
                <select id="toneFlavor" multiple style="min-height: 300px;">
                    <option value="Classic">Classic: Standar, formal, jelas, profesional</option>
                    <option value="GenZ">GenZ: Slang internet (No cap, Slay, Bet)</option>
                    <option value="Emotional">Emotional: Penuh perasaan & menyentuh hati</option>
                    <option value="Humor">Humor: Santai, lucu, memancing tawa</option>
                    <option value="Dramatic">Dramatic: Teatral, berlebihan, penuh aksi</option>
                    <option value="Dark">Dark: Suram, sinis, humor hitam</option>
                    <option value="Serious">Serious: Tegas, sungguh-sungguh</option>
                    <option value="Comic">Comic: Ringan, jenaka, kartun</option>
                    <option value="Sarcastic">Sarcastic: Nada sindiran/ejekan lucu</option>
                    <option value="Aggressive">Aggressive: Menekan & konfrontatif</option>
                    <option value="Wholesome">Wholesome: Positif, hangat, family friendly</option>
                    <option value="Melancholic">Melancholic: Sedih, reflektif, sendu</option>
                    <option value="Urgent">Urgent: Terburu-buru ("Breaking News")</option>
                    <option value="Inspirational">Inspirational: Menggugah semangat</option>
                    <option value="Whimsical">Whimsical: Aneh, unik, ajaib</option>
                    <option value="Suspense">Suspense: Menegangkan</option>
                    <option value="Motivational">Motivational: Mendorong tindakan</option>
                    <option value="ASMR-Soft">ASMR-Soft: Berbisik, lembut</option>
                    <option value="Cinematic-Epic">Cinematic-Epic: Kolosal, megah</option>
                    <option value="Bold-Corporate">Bold-Corporate: Percaya diri bisnis</option>
                    <option value="Philosophical">Philosophical: Berpikir mendalam</option>
                </select>
            </div>

            <!-- 7. STORY FORMULA -->
            <div class="form-group">
                <label>7. Story Formula</label>
                <select id="storyFormula">
                    <optgroup label="Standard & Viral">
                        <option value="WOW–HOW–NOW">WOW–HOW–NOW (Viral hook)</option>
                        <option value="Before–After–Why">Before–After–Why (Transformation)</option>
                        <option value="Problem–Action–Result">Problem–Action–Result (Classic)</option>
                        <option value="Myth–Fact–Lesson">Myth–Fact–Lesson (Debunk)</option>
                        <option value="Hook–Proof–Promise">Hook–Proof–Promise (High Conversion)</option>
                        <option value="Top-X Curiosity Loop">Top-X Curiosity Loop (Listicle)</option>
                    </optgroup>
                    
                    <optgroup label="Narrative & Emotional">
                        <option value="RANT / OPINION">RANT / OPINION (Raw Opinion → Reason → Ask)</option>
                        <option value="Twist–Reveal–Reflect">Twist–Reveal–Reflect (Surprise Ending)</option>
                        <option value="Fact–Emotion–Hope">Fact–Emotion–Hope (Non-Profit/Charity)</option>
                        <option value="Vision–Obstacle–Breakthrough">Vision–Obstacle–Breakthrough (Founder Story)</option>
                        <option value="Fear–Avoid–Achieve">Fear–Avoid–Achieve (Problem Solving)</option>
                        <option value="Contrast–Pain–Change">Contrast–Pain–Change (Visual Impact)</option>
                        <option value="OneName–OneIdea–OneChange">OneName–OneIdea–OneChange (Biography/Profile)</option>
                    </optgroup>

                    <optgroup label="Deep & Mystery">
                        <option value="Mystery–Clue–Truth">Mystery–Clue–Truth (Detective Style)</option>
                        <option value="Question–Chase–Answer">Question–Chase–Answer (Curiosity Journey)</option>
                        <option value="Chaos–Order–Purpose">Chaos–Order–Purpose (Philosophy/History)</option>
                        <option value="Pattern–Break–Impact">Pattern–Break–Impact (Analysis/Review)</option>
                        <option value="TinyDetail–BigTruth–Curiosity">TinyDetail–BigTruth–Curiosity (Video Essay)</option>
                        <option value="HiddenOrigin–ModernImpact–HumanMeaning">HiddenOrigin–Impact–Meaning (History/Lore)</option>
                    </optgroup>
                </select>
            </div>

            <!-- OPTIONAL PARAMETERS HEADER -->
            <div class="section-title">OPTIONAL PARAMETERS</div>

            <!-- 8. EMOTIONAL ARC -->
            <div class="form-group">
                <label>8. Emotional Arc <span class="optional-badge">Optional</span></label>
                <span class="helper-text">Leave on AUTO to derive from Story Formula</span>
                <select id="emotionalArc">
                    <option value="AUTO" selected>⚡ AUTO (Based on Formula)</option>
                    <option value="3-ACT">3-ACT (Setup-Conflict-Resolution)</option>
                    <option value="HEARTBEAT">HEARTBEAT (Fast-Slow-Fast)</option>
                    <option value="TRANSFORMATION">TRANSFORMATION (A → B)</option>
                    <option value="INSIGHT">INSIGHT (Building to Aha!)</option>
                    <option value="TRAGEDY/EMPATHY">TRAGEDY/EMPATHY (Hope-Fall)</option>
                    <option value="COURAGE">COURAGE (Fear-Action-Triumph)</option>
                    <option value="CURIOSITY LOOP">CURIOSITY LOOP (Questions...)</option>
                    <option value="MYSTERY ARC">MYSTERY ARC (Escalation)</option>
                    <option value="ABSURDITY">ABSURDITY (Logical to Illogical)</option>
                    <option value="REVERSE">REVERSE (Flip Expectation)</option>
                    <option value="GRATITUDE">GRATITUDE (Lack to Appreciation)</option>
                    <option value="LEGACY">LEGACY (Past-Present-Future)</option>
                    <option value="CONNECTION">CONNECTION (Isolation to Belonging)</option>
                </select>
            </div>

            <!-- 9. RETENTION -->
            <div class="form-group">
                <label>9. Retention Strategy <span class="optional-badge">Optional</span></label>
                <span class="helper-text">Leave on AUTO to derive from Duration/Formula</span>
                <select id="retention">
                    <option value="AUTO" selected>⚡ AUTO (Smart Selection)</option>
                    <option value="Click-Feedback Structure">Click-Feedback (5s validation)</option>
                    <option value="Curiosity Loop">Curiosity Loop (Mystery)</option>
                    <option value="Pattern Interrupt">Pattern Interrupt (Visual change)</option>
                    <option value="Sequential Reveal">Sequential Reveal (Layers)</option>
                    <option value="End-Loaded Payoff">End-Loaded Payoff (Best last)</option>
                    <option value="Bonus-Reveal">Bonus-Reveal (Surprise)</option>
                    <option value="Hard CTA Minimal Outro">Hard CTA Minimal Outro</option>
                    <option value="Curiosity Cliffhanger">Curiosity Cliffhanger</option>
                    <option value="Promise Breadcrumbs">Promise Breadcrumbs</option>
                    <option value="Reward Forecasting">Reward Forecasting</option>
                    <option value="Emotional Payoff Cascade">Emotional Payoff Cascade</option>
                </select>
            </div>
        </div>

        <!-- RESIZER HANDLE -->
        <div class="resizer" id="resizer"></div>

        <!-- OUTPUT SECTION -->
        <div class="output-section" id="rightPane">
            <div class="output-paper" id="outputContent">
                <!-- Content injected via JS -->
            </div>
            
            <button class="copy-btn" id="copyBtn" onclick="copyToClipboard()">
                Copy Output
            </button>
        </div>
    </div>

    <script>
        // --- DRAG RESIZE LOGIC ---
        const resizer = document.getElementById('resizer');
        const leftPane = document.getElementById('leftPane');
        const container = document.getElementById('container');
        
        let x = 0;
        let y = 0;
        let leftWidth = 0;
        let leftHeight = 0;

        const mouseDownHandler = function(e) {
            // Get current mouse position
            x = e.clientX;
            y = e.clientY;
            
            // Calculate current dimension of leftPane
            const rect = leftPane.getBoundingClientRect();
            leftWidth = rect.width;
            leftHeight = rect.height;

            resizer.classList.add('resizing');

            // Attach listeners to document
            document.addEventListener('mousemove', mouseMoveHandler);
            document.addEventListener('mouseup', mouseUpHandler);
        };

        const mouseMoveHandler = function(e) {
            // Check current window width to determine direction
            const isMobile = window.innerWidth <= 900;

            if (!isMobile) {
                // Desktop: Horizontal Resize
                const dx = e.clientX - x;
                const newWidth = leftWidth + dx;
                
                // Prevent panel from getting too small or too big
                if (newWidth > 300 && newWidth < window.innerWidth * 0.7) {
                    leftPane.style.width = `${newWidth}px`;
                    leftPane.style.flex = `0 0 ${newWidth}px`; // Force flex basis
                }
            } else {
                // Mobile: Vertical Resize
                const dy = e.clientY - y;
                const newHeight = leftHeight + dy;

                if (newHeight > 200 && newHeight < window.innerHeight * 0.8) {
                    leftPane.style.height = `${newHeight}px`;
                    leftPane.style.flex = 'none'; // Disable flex grow/shrink for custom height
                }
            }
        };

        const mouseUpHandler = function() {
            resizer.classList.remove('resizing');
            document.removeEventListener('mousemove', mouseMoveHandler);
            document.removeEventListener('mouseup', mouseUpHandler);
        };

        // Attach event listener to resizer
        resizer.addEventListener('mousedown', mouseDownHandler);
        // End Drag Logic


        // --- SMART LOGIC MAPS ---
        const arcDefaults = {
            // Original
            'WOW–HOW–NOW': 'INSIGHT',
            'Before–After–Why': 'TRANSFORMATION',
            'Problem–Action–Result': '3-ACT',
            'Myth–Fact–Lesson': 'INSIGHT',
            'Top-X Curiosity Loop': 'CURIOSITY LOOP',
            
            // New & Updated
            'RANT / OPINION': 'COURAGE',
            'Twist–Reveal–Reflect': 'MYSTERY ARC',
            'Question–Chase–Answer': 'CURIOSITY LOOP',
            'Mystery–Clue–Truth': 'MYSTERY ARC',
            'Hook–Proof–Promise': 'INSIGHT',
            'Fact–Emotion–Hope': 'TRAGEDY/EMPATHY',
            'Contrast–Pain–Change': 'TRANSFORMATION',
            'Vision–Obstacle–Breakthrough': 'COURAGE',
            'Chaos–Order–Purpose': 'INSIGHT',
            'Fear–Avoid–Achieve': 'COURAGE',
            'Pattern–Break–Impact': 'ABSURDITY',
            'OneName–OneIdea–OneChange': 'LEGACY',
            'TinyDetail–BigTruth–Curiosity': 'CURIOSITY LOOP',
            'HiddenOrigin–ModernImpact–HumanMeaning': 'LEGACY'
        };

        function getAutoRetention(durationVal, formulaVal) {
            if (formulaVal === 'RANT / OPINION') return 'Hard CTA Minimal Outro';
            if (formulaVal.includes('Mystery') || formulaVal.includes('Twist') || formulaVal.includes('TinyDetail')) return 'Curiosity Cliffhanger';
            if (formulaVal.includes('Myth') || formulaVal.includes('Proof') || formulaVal.includes('Vision')) return 'Reward Forecasting';
            if (formulaVal.includes('Fact–Emotion') || formulaVal.includes('OneName')) return 'Emotional Payoff Cascade';
            
            if (['15s', '30s'].includes(durationVal)) return 'Click-Feedback + Pattern Interrupt';
            if (['1m', '90s'].includes(durationVal)) return 'Curiosity Loop + Sequential Reveal';
            if (['3m', '5m'].includes(durationVal)) return 'Sequential Reveal + Promise Breadcrumbs';
            if (['8m', '10m', '15m+'].includes(durationVal)) return 'Emotional Payoff Cascade + End-Loaded';

            return 'Curiosity Loop';
        }

        // --- DOM Elements ---
        const inputs = {
            topic: document.getElementById('topic'),
            duration: document.getElementById('duration'),
            durationCustom: document.getElementById('durationCustom'),
            language: document.getElementById('language'),
            audiencePreset: document.getElementById('audiencePreset'),
            audienceCustom: document.getElementById('audienceCustom'),
            voiceBase: document.getElementById('voiceBase'),
            voiceCustom: document.getElementById('voiceCustom'),
            toneFlavor: document.getElementById('toneFlavor'),
            storyFormula: document.getElementById('storyFormula'),
            emotionalArc: document.getElementById('emotionalArc'),
            retention: document.getElementById('retention')
        };
        const outputDiv = document.getElementById('outputContent');
        const copyBtn = document.getElementById('copyBtn');

        // --- EVENT LISTENERS ---
        inputs.duration.addEventListener('change', () => {
            if (inputs.duration.value === 'Custom') {
                inputs.durationCustom.style.display = 'block';
                inputs.durationCustom.focus();
            } else {
                inputs.durationCustom.style.display = 'none';
            }
            generateOutput();
        });

        inputs.audiencePreset.addEventListener('change', () => {
            const val = inputs.audiencePreset.value;
            if (val && val !== 'Custom') {
                inputs.audienceCustom.value = val;
            } else if (val === 'Custom') {
                inputs.audienceCustom.value = '';
                inputs.audienceCustom.focus();
            }
            generateOutput();
        });

        Object.values(inputs).forEach(el => {
            el.addEventListener('input', generateOutput);
            el.addEventListener('change', generateOutput);
        });

        // --- HELPER FUNCTIONS ---
        function getMultiSelectValues(selectElement, customInputElement = null) {
            let selected = Array.from(selectElement.selectedOptions).map(opt => opt.value);
            if (customInputElement && customInputElement.value.trim() !== '') {
                selected.push(customInputElement.value.trim());
            }
            if (selected.length === 0) return '-';
            return selected.join(' + ');
        }

        function generateOutput() {
            const topic = inputs.topic.value.trim() || '...';
            let durasi = inputs.duration.value;
            if (durasi === 'Custom') durasi = inputs.durationCustom.value.trim() || 'Custom';
            const bahasa = inputs.language.value;
            const audience = inputs.audienceCustom.value.trim() || '...';
            const voice = getMultiSelectValues(inputs.voiceBase, inputs.voiceCustom);
            const tone = getMultiSelectValues(inputs.toneFlavor);
            const formula = inputs.storyFormula.value;

            let arc = inputs.emotionalArc.value;
            if (arc === 'AUTO') {
                const derived = arcDefaults[formula] || '3-ACT';
                arc = `${derived} (Auto-Derived)`;
            }

            let retention = inputs.retention.value;
            if (retention === 'AUTO') {
                const derived = getAutoRetention(durasi, formula);
                retention = `${derived} (Auto-Selected)`;
            }

            const htmlContent = `
                <div class="output-content">
                    <div class="output-row">
                        <span class="output-label">1. Topic:</span>
                        <span class="output-value">${topic}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">2. Durasi:</span>
                        <span class="output-value">${durasi}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">3. Bahasa:</span>
                        <span class="output-value">${bahasa}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">4. Target Audience:</span>
                        <span class="output-value">${audience}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">5. Voice Base:</span>
                        <span class="output-value">${voice}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">6. Tone Flavor:</span>
                        <span class="output-value">${tone}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">7. Story Formula:</span>
                        <span class="output-value">${formula}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">8. Emotional Arc:</span>
                        <span class="output-value">${arc}</span>
                    </div>
                    <div class="output-row">
                        <span class="output-label">9. Retention:</span>
                        <span class="output-value">${retention}</span>
                    </div>
                </div>
            `;
            outputDiv.innerHTML = htmlContent;
        }

        function copyToClipboard() {
            let durasi = inputs.duration.value;
            if (durasi === 'Custom') durasi = inputs.durationCustom.value;
            const formula = inputs.storyFormula.value;
            let arc = inputs.emotionalArc.value;
            if (arc === 'AUTO') arc = (arcDefaults[formula] || '3-ACT') + ' (Auto-Derived)';
            let retention = inputs.retention.value;
            if (retention === 'AUTO') retention = getAutoRetention(durasi, formula) + ' (Auto-Selected)';

            const plainText = `1. Topic: ${inputs.topic.value.trim()}
2. Durasi: ${durasi}
3. Bahasa: ${inputs.language.value}
4. Target Audience: ${inputs.audienceCustom.value}
5. Voice Base: ${getMultiSelectValues(inputs.voiceBase, inputs.voiceCustom)}
6. Tone Flavor: ${getMultiSelectValues(inputs.toneFlavor)}
7. Story Formula: ${formula}
8. Emotional Arc: ${arc}
9. Retention: ${retention}`;

            navigator.clipboard.writeText(plainText).then(() => {
                copyBtn.textContent = '✓ Copied';
                copyBtn.classList.add('copied');
                setTimeout(() => {
                    copyBtn.textContent = 'Copy Output';
                    copyBtn.classList.remove('copied');
                }, 2000);
            });
        }

        // Initialize
        generateOutput();
    </script>
</body>
</html>
